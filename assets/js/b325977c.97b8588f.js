"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[241],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(n),h=i,m=u["".concat(l,".").concat(h)]||u[h]||d[h]||r;return n?a.createElement(m,o(o({ref:t},c),{},{components:n})):a.createElement(m,o({ref:t},c))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:i,o[1]=s;for(var p=2;p<r;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},9104:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var a=n(7462),i=(n(7294),n(3905));const r={sidebar_position:1},o="History",s={unversionedId:"plugins/history",id:"plugins/history",title:"History",description:"signalstory provides a convenient way for consumers to access and navigate the state history of a store. By enabling the StoreHistoryPlugin, you can use undo and redo functionality and gain insights into the sequence of actions that have occurred within your application.",source:"@site/docs/plugins/history.md",sourceDirName:"plugins",slug:"/plugins/history",permalink:"/signalstory/docs/plugins/history",draft:!1,editUrl:"https://github.com/zuriscript/signalstory/tree/master/docs/docs/plugins/history.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Plugins",permalink:"/signalstory/docs/category/plugins"},next:{title:"Persistence",permalink:"/signalstory/docs/plugins/persistence"}},l={},p=[{value:"Enabling State History",id:"enabling-state-history",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Accessing State History",id:"accessing-state-history",level:2},{value:"Undo and Redo Actions",id:"undo-and-redo-actions",level:2}],c={toc:p},u="wrapper";function d(e){let{components:t,...n}=e;return(0,i.kt)(u,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"history"},"History"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"signalstory")," provides a convenient way for consumers to access and navigate the state history of a store. By enabling the ",(0,i.kt)("inlineCode",{parentName:"p"},"StoreHistoryPlugin"),", you can use undo and redo functionality and gain insights into the sequence of actions that have occurred within your application."),(0,i.kt)("h2",{id:"enabling-state-history"},"Enabling State History"),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"While the plugin works with regular stores, it is recommended to use it exclusively with immutable stores to ensure optimal performance.")),(0,i.kt)("p",null,"To activate the state history feature in signalstory, you need to include the plugin using the exposed ",(0,i.kt)("inlineCode",{parentName:"p"},"useStoreHistory")," factory method:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"class StoreWithHistory extends Store<MyState> {\n  constructor() {\n    super({\n        initialState: { ... },\n        name: 'My Store with history',\n        plugins: [\n          useStoreHistory()\n        ],\n    });\n  }\n}\n")),(0,i.kt)("p",null,"By enabling state history, signalstory will automatically store the history of state changes within the store by tracking ",(0,i.kt)("inlineCode",{parentName:"p"},"set"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"update")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"mutate")," calls."),(0,i.kt)("h2",{id:"configuration"},"Configuration"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"useStoreHistory")," function accepts an optional configuration object, providing customization options for the history plugin. The available options are:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Option"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"),(0,i.kt)("th",{parentName:"tr",align:null},"Default Value"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"maxLength")),(0,i.kt)("td",{parentName:"tr",align:null},"Maximum length of the history."),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"undefined"))))),(0,i.kt)("p",null,"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"useStoreHistory({\n  maxLength: 100,\n});\n")),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"By defining ",(0,i.kt)("inlineCode",{parentName:"p"},"maxLength"),", you can control the history size, keeping memory usage in check. If left unspecified (",(0,i.kt)("inlineCode",{parentName:"p"},"undefined"),"), the history will expand without constraints. The choice not to set a default max length aims to maintain compatibility with versions ",(0,i.kt)("inlineCode",{parentName:"p"},"17.*"),", as this would introduce a Breaking Change. A designated default value will be introduced starting from version ",(0,i.kt)("inlineCode",{parentName:"p"},"18"),".")),(0,i.kt)("h2",{id:"accessing-state-history"},"Accessing State History"),(0,i.kt)("p",null,"Once the state history is enabled, you can access the history of a store using the ",(0,i.kt)("inlineCode",{parentName:"p"},"getHistory")," method."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"getHistory(store);\n")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"getHistory")," method returns an array of ",(0,i.kt)("inlineCode",{parentName:"p"},"HistoryItem<TState>"),", where each item represents a specific state change in the store's history. Each ",(0,i.kt)("inlineCode",{parentName:"p"},"HistoryItem")," contains information about the command or action that caused the state change and the state before the change."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"interface HistoryItem<TState> {\n  command: string; // The name of the command associated with the history item.\n  before: TState; // The state before the command was applied.\n}\n")),(0,i.kt)("h2",{id:"undo-and-redo-actions"},"Undo and Redo Actions"),(0,i.kt)("p",null,"signalstory simplifies the process of undoing and redoing state changes by providing dedicated methods: ",(0,i.kt)("inlineCode",{parentName:"p"},"undo")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"redo"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"undo(store); // Undo the last state change\nredo(store); // Redo the last undone state change, if available\n")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"undo")," method reverts the store's state to the previous state in the history, effectively reversing the last action. On the other hand, the ",(0,i.kt)("inlineCode",{parentName:"p"},"redo")," method reapplies a previously undone state change, if there is one available."))}d.isMDXComponent=!0}}]);