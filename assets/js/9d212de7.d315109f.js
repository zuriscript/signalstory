"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[243],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>v});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=c(n),h=a,v=d["".concat(s,".").concat(h)]||d[h]||u[h]||i;return n?r.createElement(v,o(o({ref:t},p),{},{components:n})):r.createElement(v,o({ref:t},p))}));function v(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=h;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:a,o[1]=l;for(var c=2;c<i;c++)o[c]=n[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},3334:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var r=n(7462),a=(n(7294),n(3905));const i={sidebar_position:4},o="Event",l={unversionedId:"building-blocks/event",id:"building-blocks/event",title:"Event",description:"By utilizing events and event handlers, you can establish communication between stores, propagate side effect results, and coordinate actions across different parts of your application. This decoupled approach enables a more modular and flexible architecture, allowing for better maintainability and extensibility of your Angular application.",source:"@site/docs/building-blocks/event.md",sourceDirName:"building-blocks",slug:"/building-blocks/event",permalink:"/signalstory/docs/building-blocks/event",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/building-blocks/event.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Effect",permalink:"/signalstory/docs/building-blocks/effect"},next:{title:"History",permalink:"/signalstory/docs/history"}},s={},c=[{value:"Event Blueprint",id:"event-blueprint",level:2},{value:"Event Handlers",id:"event-handlers",level:2},{value:"Publishing Events",id:"publishing-events",level:2},{value:"Replay",id:"replay",level:2}],p={toc:c},d="wrapper";function u(e){let{components:t,...n}=e;return(0,a.kt)(d,(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"event"},"Event"),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"By utilizing events and event handlers, you can establish communication between stores, propagate side effect results, and coordinate actions across different parts of your application. This decoupled approach enables a more modular and flexible architecture, allowing for better maintainability and extensibility of your Angular application.")),(0,a.kt)("h2",{id:"event-blueprint"},"Event Blueprint"),(0,a.kt)("p",null,"An ",(0,a.kt)("inlineCode",{parentName:"p"},"event")," is represented by the ",(0,a.kt)("inlineCode",{parentName:"p"},"StoreEvent")," interface, which typically includes a name and an optional payload. The name serves as a unique identifier for the event, while the payload contains any additional data associated with the event. You can use the ",(0,a.kt)("inlineCode",{parentName:"p"},"createEvent")," function provided by signalstory to create ",(0,a.kt)("inlineCode",{parentName:"p"},"event blueprints")," with the desired name and payload type. Those blueprint can then be published alongside a payload parameter:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"import { createEvent } from 'signalstory';\n\nconst myEventWithPayload = createEvent<MyPayloadType>('My Event');\nconst myEventWithNoPayload = createEvent('My Event and nothing more');\n")),(0,a.kt)("h2",{id:"event-handlers"},"Event Handlers"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Event handlers"),", on the other hand, are functions that are executed when a specific event is published. They define the behavior or actions to be taken in response to the occurrence of an event. An event handler is always registered in the context of a specific store and hence defines how a certain store reacts to a specific event.\nTo register an event handler, you need to specify the event you want to handle and provide the corresponding handler function."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"import { Store } from 'signalstory';\n\nexport const booksLoadedFailure = createEvent('Books could not be loaded');\n\n@Injectable({ providedIn: 'root' })\nexport class BooksStore extends Store<Book[]> {\n  constructor() {\n    super({\n      initialState: [],\n      enableEvents: true,\n    });\n\n    this.registerHandler(\n      booksLoadedFailure,\n      this.handleBooksLoadedFailureEvent.bind(this)\n    );\n  }\n\n  private handleBooksLoadedFailureEvent(_: StoreEvent<never>) {\n    this.set([], 'Reset Books');\n  }\n}\n")),(0,a.kt)("h2",{id:"publishing-events"},"Publishing Events"),(0,a.kt)("p",null,"Events can be published using the ",(0,a.kt)("inlineCode",{parentName:"p"},"publish")," method available in the store. Publishing an event triggers the execution of all registered event handlers for that particular event."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"const myEvent = createEvent<number>('My Event');\n\n// Any store works here\n// You can also publish events in a store command\n// Or as result of an effect\nstore.publish(myEvent, 5);\n")),(0,a.kt)("h2",{id:"replay"},"Replay"),(0,a.kt)("p",null,"When registering a new event handler, you can optionally specify the ",(0,a.kt)("inlineCode",{parentName:"p"},"withReplay")," parameter which defaults to false. By using replay, all already published events are replayed only for this specific store at the moment of registration. This is useful for dynamic or lazily initialized stores."))}u.isMDXComponent=!0}}]);