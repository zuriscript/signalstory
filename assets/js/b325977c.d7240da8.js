"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[241],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=p(n),m=r,h=d["".concat(l,".").concat(m)]||d[m]||u[m]||o;return n?a.createElement(h,i(i({ref:t},c),{},{components:n})):a.createElement(h,i({ref:t},c))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:r,i[1]=s;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},9104:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const o={sidebar_position:1},i="History (Deprecated)",s={unversionedId:"plugins/history",id:"plugins/history",title:"History (Deprecated)",description:"Deprecation Notice: The single-store history plugin (useStoreHistory) is now deprecated and will be removed in future Major releases. We recommend migrating to the new and improved trackHistory function for enhanced flexibility and expanded features. The new API supports multiple stores, allowing you to track and manage state changes across various parts of your application. It provides more advanced capabilities, including transactional undo/redo operations and a more efficient handling of memory.",source:"@site/docs/plugins/history.md",sourceDirName:"plugins",slug:"/plugins/history",permalink:"/signalstory/docs/plugins/history",draft:!1,editUrl:"https://github.com/zuriscript/signalstory/tree/master/docs/docs/plugins/history.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Plugins",permalink:"/signalstory/docs/category/plugins"},next:{title:"Persistence",permalink:"/signalstory/docs/plugins/persistence"}},l={},p=[{value:"Enabling State History",id:"enabling-state-history",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Accessing State History",id:"accessing-state-history",level:2},{value:"Undo and Redo Actions",id:"undo-and-redo-actions",level:2}],c={toc:p},d="wrapper";function u(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"history-deprecated"},"History (Deprecated)"),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"Deprecation Notice:")," The single-store history plugin (",(0,r.kt)("inlineCode",{parentName:"p"},"useStoreHistory"),") is now deprecated and will be removed in future Major releases. We recommend migrating to the new and improved ",(0,r.kt)("a",{parentName:"p",href:"/signalstory/docs/history"},"trackHistory")," function for enhanced flexibility and expanded features. The new API supports multiple stores, allowing you to track and manage state changes across various parts of your application. It provides more advanced capabilities, including transactional undo/redo operations and a more efficient handling of memory.")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"signalstory")," provides a convenient way for consumers to access and navigate the state history of a store. By enabling the ",(0,r.kt)("inlineCode",{parentName:"p"},"StoreHistoryPlugin"),", you can use undo and redo functionality and gain insights into the sequence of actions that have occurred within your application."),(0,r.kt)("h2",{id:"enabling-state-history"},"Enabling State History"),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"While the plugin works with regular stores, it is recommended to use it exclusively with immutable stores to ensure optimal performance.")),(0,r.kt)("p",null,"To activate the state history feature in signalstory, you need to include the plugin using the exposed ",(0,r.kt)("inlineCode",{parentName:"p"},"useStoreHistory")," factory method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"class StoreWithHistory extends Store<MyState> {\n  constructor() {\n    super({\n        initialState: { ... },\n        name: 'My Store with history',\n        plugins: [\n          useStoreHistory()\n        ],\n    });\n  }\n}\n")),(0,r.kt)("p",null,"By enabling state history, signalstory will automatically store the history of state changes within the store by tracking ",(0,r.kt)("inlineCode",{parentName:"p"},"set"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"update")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"mutate")," calls."),(0,r.kt)("h2",{id:"configuration"},"Configuration"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"useStoreHistory")," function accepts an optional configuration object, providing customization options for the history plugin. The available options are:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Option"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default Value"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"maxLength")),(0,r.kt)("td",{parentName:"tr",align:null},"Maximum length of the history."),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"undefined"))))),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"useStoreHistory({\n  maxLength: 100,\n});\n")),(0,r.kt)("h2",{id:"accessing-state-history"},"Accessing State History"),(0,r.kt)("p",null,"Once the state history is enabled, you can access the history of a store using the ",(0,r.kt)("inlineCode",{parentName:"p"},"getHistory")," method."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"getHistory(store);\n")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"getHistory")," method returns an array of ",(0,r.kt)("inlineCode",{parentName:"p"},"HistoryItem<TState>"),", where each item represents a specific state change in the store's history. Each ",(0,r.kt)("inlineCode",{parentName:"p"},"HistoryItem")," contains information about the command or action that caused the state change and the state before the change."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"interface HistoryItem<TState> {\n  command: string; // The name of the command associated with the history item.\n  before: TState; // The state before the command was applied.\n}\n")),(0,r.kt)("h2",{id:"undo-and-redo-actions"},"Undo and Redo Actions"),(0,r.kt)("p",null,"signalstory simplifies the process of undoing and redoing state changes by providing dedicated methods: ",(0,r.kt)("inlineCode",{parentName:"p"},"undo")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"redo"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"undo(store); // Undo the last state change\nredo(store); // Redo the last undone state change, if available\n")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"undo")," method reverts the store's state to the previous state in the history, effectively reversing the last action. On the other hand, the ",(0,r.kt)("inlineCode",{parentName:"p"},"redo")," method reapplies a previously undone state change, if there is one available."))}u.isMDXComponent=!0}}]);